# =============================================================================
# D.A.L.T - Distributed Advanced Load Testing Platform
# Environment Configuration Template
# =============================================================================

# -----------------------------------------------------------------------------
# 1. CORE INFRASTRUCTURE (Docker / K8s)
# -----------------------------------------------------------------------------

# Database (MongoDB) - Persistent Storage
MONGO_INITDB_ROOT_USERNAME=admin
MONGO_INITDB_ROOT_PASSWORD=change_me_secure_password
MONGODB_URI=mongodb://admin:change_me_secure_password@mongodb:27017/loadtest?authSource=admin&minPoolSize=5&maxPoolSize=50

# Cache & Message Queue (Redis)
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=change_me_redis_password
# Full URL for services (Worker/Controller)
REDIS_URL=redis://:change_me_redis_password@redis:6379

# -----------------------------------------------------------------------------
# 2. CONTROLLER SERVICE (Java Spring Boot)
# -----------------------------------------------------------------------------
SPRING_PROFILES_ACTIVE=production
SERVER_PORT=8080

# Security & Authentication (Supabase / JWT)
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_JWT_SECRET=your-supabase-jwt-secret-key-here
JWT_EXPIRATION_MS=86400000

# CORS & Networking
ALLOWED_ORIGINS=http://localhost:3000,https://loadtest.yourdomain.com

# Admission Control (Policy Engine)
ADMISSION_HOST=admission
ADMISSION_PORT=9090

# Observability (Zipkin / Tracing)
ZIPKIN_ENDPOINT=http://zipkin:9411/api/v2/spans
MANAGEMENT_TRACING_SAMPLING_PROBABILITY=0.1

# Resilience (Resilience4j)
RESILIENCE_REDIS_RETRY_ATTEMPTS=3
RESILIENCE_AUTH_RATE_LIMIT=10

# -----------------------------------------------------------------------------
# 3. WORKER SERVICE (Rust)
# -----------------------------------------------------------------------------
# Identifier
WORKER_ID=worker-node-01
RUN_MODE=production

# Performance Limits
APP__LIMITS__MAX_CONCURRENT_TASKS=5
APP__LIMITS__MAX_VIRTUAL_USERS=5000
APP__LIMITS__HEARTBEAT_INTERVAL_SECONDS=5

# HTTP Client Tuning
APP__HTTP__TIMEOUT_SECONDS=30
APP__HTTP__MAX_IDLE_CONNECTIONS=100
APP__HTTP__CONNECT_TIMEOUT_SECONDS=5

# Logging
APP__LOGGING__LEVEL=info
APP__LOGGING__JSON=true

# -----------------------------------------------------------------------------
# 4. ANALYTICS SERVICE (Python FastAPI)
# -----------------------------------------------------------------------------
ANALYTICS_PORT=8000
ANALYTICS_WORKERS=4
# Thresholds for Anomaly Detection
ANOMALY_STD_DEV_THRESHOLD=3.0
LATENCY_DEGRADATION_THRESHOLD_MS=100.0

# -----------------------------------------------------------------------------
# 5. MONITORING & ALERTS
# -----------------------------------------------------------------------------
# Grafana
GRAFANA_ADMIN_PASSWORD=change_me_grafana_password
GF_SERVER_ROOT_URL=https://loadtest.yourdomain.com/grafana/

# Prometheus
PROMETHEUS_RETENTION_TIME=15d

# Alert Channels
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=alerts@yourdomain.com
SMTP_PASSWORD=your-smtp-app-password
